services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile.backend
    restart: always
    env_file:
      - .env
    ports:
      - "${BACKEND_PORT}:${BACKEND_PORT}"
    networks:
      - main

  frontend:
    env_file:
      - .env
    build:
      context: .
      dockerfile: Dockerfile.frontend
      args:
        BACKEND_PORT: ${BACKEND_PORT}
        FRONTEND_PORT: ${FRONTEND_PORT}
        VITE_BACKEND_URL: ${VITE_BACKEND_URL}
    restart: always

    ports:
      - "${FRONTEND_PORT}:${FRONTEND_PORT}"
    networks:
      - main

networks:
  main:
    external: true
    name: sklad-db_main
